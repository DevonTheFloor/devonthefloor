__NUXT_JSONP__("/blog/parametrage-happy-dom", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj){return {data:[{page:{slug:"parametrage-happy-dom",description:"Le paramétrage de happy-dom dans les tests unitaires avec ViTest.",title:"Paramètrage de Happy DOM dans vitest",img:"https:\u002F\u002Fthierry-go-dev.fr\u002Ftourn\u002Fimages\u002Fblog\u002Fvitesthappy.png",write:"23\u002F07\u002F2023",theme:"Vitest",toc:[{id:N,depth:O,text:P},{id:Q,depth:O,text:R}],body:{type:"root",children:[{type:b,tag:l,props:{},children:[{type:a,value:"Lorsque l'on fait des tests avec ViTest, l'environnement par défaut est Node.js. Cependant, si l'on souhaite tester la manipulation du DOM, il est nécessaire de substituer cet environnement Node.js par celui du navigateur."},{type:b,tag:x,props:{},children:[]},{type:a,value:"\nBien entendu, au lieu d'utiliser un véritable navigateur pour ces tests, on utilisera une émulation."},{type:b,tag:x,props:{},children:[]},{type:a,value:"\nPendant longtemps, la bibliothèque JSDOM était le choix par défaut pour cette tâche. Cependant, aujourd'hui, une alternative plus efficace et conviviale est disponible : Happy-DOM."},{type:b,tag:x,props:{},children:[]},{type:a,value:"\nCette surcouche DOM légère offre une solution simple et puissante pour faciliter la manipulation des éléments du DOM lors des tests avec ViTest."}]},{type:a,value:h},{type:b,tag:S,props:{id:N},children:[{type:b,tag:y,props:{href:"#pourquoi-happy-dom-est-plus-pratique-que-jsdom",ariaHidden:T,tabIndex:U},children:[{type:b,tag:c,props:{className:[V,W]},children:[]}]},{type:a,value:P}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Contrairement a JSDOM toutes les fonctionnalités native du DOM, telles que \"document.create\" et autre \"getElementById\", exsite dans happy-dom, alors qu'avec JSDOM il faut toutes les mocker.\nOn peut donc utiliser des sélecteurs CSS ou des attributs pour cibler les éléments, rendant les tests plus lisibles et compréhensibles."}]},{type:a,value:h},{type:b,tag:S,props:{id:Q},children:[{type:b,tag:y,props:{href:"#installation",ariaHidden:T,tabIndex:U},children:[{type:b,tag:c,props:{className:[V,W]},children:[]}]},{type:a,value:R}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Dans ton projet vitest installe happy-dom, classiquement:"}]},{type:a,value:h},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,X]},children:[{type:b,tag:G,props:{},children:[{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"npm"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"install"}]},{type:a,value:" happy-dom\n"}]}]}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Sur la "},{type:b,tag:y,props:{href:"https:\u002F\u002Fgithub.com\u002Fcapricorn86\u002Fhappy-dom\u002Fwiki\u002FGetting-started",rel:[Y,Z,_],target:$},children:[{type:a,value:"page du wiki dédié"}]},{type:a,value:" tu trouveras le script d'initialisation du DOM:"}]},{type:a,value:h},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,"language-js"]},children:[{type:b,tag:G,props:{},children:[{type:b,tag:c,props:{className:[d,q,aa]},children:[{type:a,value:ab}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"imports"]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"maybe-class-name"]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q,aa]},children:[{type:a,value:"from"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'happy-dom'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:ad}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"new"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,ae]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,K,L]},children:[{type:a,value:"url"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'https:\u002F\u002Flocalhost:8080'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:af}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,K,L]},children:[{type:a,value:"width"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1024"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:af}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,K,L]},children:[{type:a,value:"height"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:M}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"768"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ah}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u003Cdiv class=\"container\"\u003E\u003C\u002Fdiv\u003E'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:A}]},{type:a,value:" container "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,B,m,k]},children:[{type:a,value:"querySelector"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'.container'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:A}]},{type:a,value:" button "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,B,m,k]},children:[{type:a,value:"createElement"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'button'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\n\ncontainer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,B,m,k]},children:[{type:a,value:"appendChild"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:a,value:"button"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,"comment"]},children:[{type:a,value:"\u002F\u002F Outputs \"\u003Cdiv class=\"container\"\u003E\u003Cbutton\u003E\u003C\u002Fbutton\u003E\u003C\u002Fdiv\u003E\""}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,ai,ae]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,B,m,k]},children:[{type:a,value:"log"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:v}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"   \n"}]}]}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Le premier problème surviendra très rapidement sous une forme similaire à celle ci:"}]},{type:a,value:h},{type:b,tag:C,props:{className:[D]},children:[{type:b,tag:E,props:{className:[F,X]},children:[{type:b,tag:G,props:{},children:[{type:a,value:"ReferenceError: document is not defined\n ❯ js\u002Fmodule-liste\u002Findex.js:3:15\n      "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ab}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:H}]},{type:a,value:" dGEBId, dCrEl "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:I}]},{type:a,value:" from "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"..\u002Fmodules\u002Fdom-helpers.js\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"\n      "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:" \n      "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"3"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:" const "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"mount"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:" document.getElementById"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'mount-point'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:",\n       "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:"               ^\n      "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"4"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:"   body "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:" document.querySelector"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:t}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'body'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:",\n      "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"5"}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:w}]},{type:a,value:"   numt "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"["}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1,2"}]},{type:a,value:",3,4,5"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"]"}]},{type:a,value:",\n ❯ js\u002Fmodule-liste\u002F__test__\u002FindexTest.spec.js:2:31\n"}]}]}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Problème facilement resolu en ce référant à "},{type:b,tag:y,props:{href:"https:\u002F\u002Fvitest.dev\u002Fconfig\u002F#environment",rel:[Y,Z,_],target:$},children:[{type:a,value:"la documentation de Vitest"}]},{type:a,value:" pour initialiser l'environnement."},{type:b,tag:x,props:{},children:[]},{type:a,value:"\nUne fois happy-dom initialiser dans tes tests en comments style (par exemple), document sera reconnu. Tu pourras donc tester ta fabuleuse fonction qui manipule le DOM et bien plus encore."}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Alors , on est pas bien là?\nA dev secure, détendu du test ?"}]},{type:a,value:h},{type:b,tag:l,props:{},children:[{type:a,value:"Sur ce, bon week et la semaine prochaiiiièène !"}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fparametrage-happy-dom",extension:".md",createdAt:aj,updatedAt:aj}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","operator","\n",";",".","property-access","p","function","string","=","number","keyword","dom","variable","(",")","document","|","br","a","\n\n","const","method","div","nuxt-content-highlight","pre","line-numbers","code","{","}","\n   ","literal-property","property",":","pourquoi-happy-dom-est-plus-pratique-que-jsdom",2,"Pourquoi happy-dom est plus pratique que JSDOM?","installation","Installation","h2","true",-1,"icon","icon-link","language-shell","nofollow","noopener","noreferrer","_blank","module","import","Window","window","class-name",",","body","innerHTML","console","2024-08-18T13:56:20.609Z")));